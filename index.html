<!-- In your <style> section, no changes needed -->

<body>
  <!-- Fixed status circle and Home button -->
  <div id="statusCircle" title="Status"></div>
  <button id="homeBtn" aria-label="Home">
    <img src="icons/academic-allies.png" alt="Home">
  </button>

  <!-- Preview content, hidden by default -->
  <div id="preview" class="hidden" style="margin:8rem auto 2rem; max-width:600px; text-align:center; font-size:1.1rem; color:#4b5563;">
    <p><strong>Site Preview Coming Soon…</strong></p>
    <p>Click Home (top left) to return here at any time.</p>
  </div>

  <!-- Pre-auth Google Sign-In panel -->
  <div id="pre-auth">
    <section class="google-panel" aria-label="Google Sign-In">
      <button id="google-signin-btn" class="google-btn">
        <span class="google-icon"></span>Sign in with Google
      </button>
      <button id="previewBtn" class="google-btn" style="background:#6b7280; margin-top:1rem;">
        Preview Site
      </button>
      <button id="google-signout-btn" class="google-btn hidden">Sign out</button>
      <div id="google-user" class="hidden" style="margin-top:1rem;font-weight:600;"></div>
    </section>
  </div>

  <!-- Post-auth app features, hidden until sign-in -->
  <div id="post-auth" class="hidden">
    <!-- component includes… -->
  </div>

  <!-- Scripts… -->
  <script>
    // … Firebase and Google config …

    // Helper to show/hide sections
    function showPreview() {
      document.getElementById('preview').classList.remove('hidden');
      document.getElementById('pre-auth').classList.add('hidden');
      document.getElementById('post-auth').classList.add('hidden');
    }
    function showPreAuth() {
      document.getElementById('preview').classList.add('hidden');
      document.getElementById('pre-auth').classList.remove('hidden');
      document.getElementById('post-auth').classList.add('hidden');
    }
    function showPostAuth(user) {
      document.getElementById('preview').classList.add('hidden');
      document.getElementById('pre-auth').classList.add('hidden');
      document.getElementById('post-auth').classList.remove('hidden');
      document.getElementById('google-user').textContent = user.name||user.email;
      document.getElementById('google-user').classList.remove('hidden');
      document.getElementById('google-signout-btn').classList.remove('hidden');
    }

    // Home button returns to Preview
    document.getElementById('homeBtn').onclick = () => {
      showPreview();
      document.getElementById('preview').scrollIntoView({ behavior: 'smooth' });
    };

    // Preview button shows Preview
    document.getElementById('previewBtn').onclick = showPreview;

    // Google Sign-In and Sign-Out handlers
    document.getElementById('google-signin-btn').onclick = () => {
      google.accounts.id.initialize({ client_id: GOOGLE_CLIENT_ID, callback: handleCredential });
      google.accounts.id.prompt();
    };
    document.getElementById('google-signout-btn').onclick = async () => {
      await firebase.signOut(auth);
      showPreAuth();
    };

    // Handle Google response
    async function handleCredential(resp) {
      const user = JSON.parse(atob(resp.credential.split('.')[1]));
      try {
        const cred = firebase.GoogleAuthProvider.credential(resp.credential);
        await firebase.signInWithCredential(auth, cred);
        showPostAuth(user);
        // load components…
      } catch {
        alert("Sign-in failed");
        showPreAuth();
      }
    }
  </script>
</body>
